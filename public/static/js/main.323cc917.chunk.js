(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(65)},33:function(e,t,n){},35:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(20),a=n(2),i=n(8);function s(e){return{store:e}}n(33);var c=n(4),l=(n(35),n(5)),d=function(e){return e.expadedButton?o.createElement("button",{className:"expanded-button"},e.buttonMessage,o.createElement("span",{className:"btn-logo"},o.createElement(l.a,{icon:e.buttonIcon}))):o.createElement("button",{className:"input-button"},e.buttonMessage,o.createElement("span",{className:"btn-logo"},o.createElement(l.a,{icon:e.buttonIcon})))},p=function(e){var t,n="";return"link"===e.useCase?t=o.createElement("div",{className:"instruction-container"},o.createElement("h5",null,"Ways to get the link:"),o.createElement("p",{className:"mini-title"},"Method 1"),o.createElement("p",null,o.createElement("span",{className:"point-number"},"1.")," Go to YouTube and enter the homepage of the channel that you want to subscribe"),o.createElement("p",null,o.createElement("span",{className:"point-number"},"2.")," Copy the link of that page and paste it in here"),o.createElement("p",{className:"mini-title"},"Method 2"),o.createElement("p",null,o.createElement("span",{className:"point-number"},"1.")," Open the YouTube app and search for the channel you want to subscribe to"),o.createElement("p",null,o.createElement("span",{className:"point-number"},"2.")," Enter channel and click the share icon"),o.createElement("p",null,o.createElement("span",{className:"point-number"},"3.")," Select TubeNotify on the share panel")):(n="input-key-word",t=o.createElement("div",{className:"instruction-container"},o.createElement("div",null,o.createElement("h5",null,'What is a "keyword"?'),o.createElement("p",null,'By the word "keyword" we mean a word that we will use to check if the video has your specified content. A "keyword" can be a letter or a word or a sentence or even an emoji. In short, a keyword is the word which is used to check for a match.')),o.createElement("div",null,o.createElement("h5",null,"Example:"),o.createElement("p",null,"If you want to get notification for Android videos from a specific channel, you'll have to use keywords related to it such as ",o.createElement("span",null,"android"),", ",o.createElement("span",null,"android update")," etc."," ",o.createElement("em",null,"Keywords aren't case sensitive."),"That means the keywords ",o.createElement("span",null,"apple")," and ",o.createElement("span",null,"Apple")," and ",o.createElement("span",null,"ApPlE")," are the same.")))),o.createElement("div",{className:"wrapper"},o.createElement("h1",null,e.mainText),o.createElement("input",{id:"input",className:n,type:"text",placeholder:e.inputFieldText}),o.createElement("div",{id:"input-msg-container"},o.createElement("span",{id:"input-msg"},"The link you have entered is not valid!")),o.createElement("br",null),t,o.createElement("div",{onClick:e.refToThis.submitter},o.createElement(d,{buttonIcon:c.b,buttonMessage:"Next"})))};var u=function(e){var t,n,o={key:"AIzaSyBV7e5CrBUqUzc1dlUVCr8vK6HpZL5h7u8",type:e.type};o.part=e.part,"channels"===e.type&&("id"in e?o.id=e.id:o.forUsername=e.forUsername),"playlistItems"===e.type&&(o.playlistId=e.playlistId,o.maxResults=e.maxResults);var r="https://www.googleapis.com/youtube/v3/";r=""+r+o.type+"?",delete o.type;var i=Object.keys(o);try{for(var s=a.f(i),c=s.next();!c.done;c=s.next()){var l=c.value;r+=l+"="+o[l]+"&"}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return console.log(r),r};var h=function(e,t){e.props.dispatch({type:"eraseTitles"}),e.props.dispatch({type:"eraseDescriptions"}),e.props.dispatch({type:"eraseThumbnailLinks"}),e.props.dispatch({type:"eraseVideoIds"}),e.props.dispatch({type:"eraseVideoPublishDates"}),"selector"===t&&e.props.dispatch({type:"eraseRequestLink"})},m=(n(42),function(e){return o.createElement("div",{className:"loader-container"},o.createElement("div",{className:"lds-ellipsis"},o.createElement("div",null),o.createElement("div",{className:"dotOne"}),o.createElement("div",{className:"dotTwo"}),o.createElement("div",null)))}),f=n(69);var y=function(e,t){var n=[];return e.forEach(function(e,o){e.split(" ").forEach(function(e){t.forEach(function(t){var r=t.toLocaleLowerCase();e.toLocaleLowerCase()===r&&n.push(o)})})}),n};var g=function(e){var t,n,o=e.toCompareWith,r=e.source,i=[];try{for(var s=a.f(o),c=s.next();!c.done;c=s.next()){var l=c.value;i.push(r[l])}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i};var v=function(e){var t,n,o;try{for(var r=a.f(e.arrayToCommit),i=r.next();!i.done;i=r.next()){var s=i.value;e.refToDispatcher(((o={})[e.commitName]=s,o.type="add"+e.commitName+"s",o))}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.submitter=function(){var e=document.getElementById("input"),t=n.props.store.stepCounter,o=e.value;if(1===t)if(""!==o){var r=o.trim().split("/");if(1===r.length){e.style.borderColor="#ff4646",e.style.boxShadow="0px 0px 40px -18px #d53e3e",document.getElementById("input-msg-container").style.display="flex"}else{var i=r[r.length-1],s="";s="channel"===r[r.length-2]?u({id:i,type:"channels",part:"contentDetails, snippet"}):u({forUsername:i,type:"channels",part:"contentDetails, snippet"}),n.props.dispatch({type:"showLoader"}),fetch(s).then(function(e){e.json().then(function(e){console.log(e.items[0].snippet.thumbnails.default.url);var t=e.items[0].snippet.thumbnails.default.url;if(0===e.items.length)n.props.dispatch({type:"showError"});else{var o=e.items[0].contentDetails.relatedPlaylists.uploads;console.log(e);var r=u({playlistId:o,type:"playlistItems",maxResults:50,part:"snippet"});fetch(r).then(function(e){e.json().then(function(e){console.log(e);var o=e.items[e.items.length-1].snippet.resourceId.videoId;n.props.dispatch({type:"addAdditionalInfo",action:{channelName:e.items[0].snippet.channelTitle,channelTag:e.items[0].snippet.channelId,channelLogoLink:t,playlistID:e.items[0].snippet.playlistId,lookedUpToThisVideoTag:o}});var a=e.items,i=[],s=[],c=[],l=[],d=[];a.forEach(function(e){c.push(e.snippet.title),i.push(e.snippet.description),s.push(e.snippet.thumbnails.medium.url),l.push(e.snippet.resourceId.videoId),d.push(e.snippet.publishedAt)});var p=[];d.forEach(function(e){var t=e.substring(0,10);p.push(t)}),n.props.dispatch({type:"requestLink",link:r,nextPageToken:e.nextPageToken}),n.props.dispatch({type:"addVideoIds",videoIds:l}),n.props.dispatch({type:"addVideoPublishDates",dates:p}),v({refToDispatcher:n.props.dispatch,commitName:"Title",arrayToCommit:c}),v({refToDispatcher:n.props.dispatch,commitName:"Description",arrayToCommit:i}),v({refToDispatcher:n.props.dispatch,commitName:"ThumbnailLink",arrayToCommit:s}),n.props.dispatch({type:"stepInc"})})}).catch(function(e){n.props.dispatch({type:"showError"})})}})}).catch(function(e){n.props.dispatch({type:"showError"})})}}else e.style.borderColor="#ff4646",e.style.boxShadow="0px 0px 40px -18px #d53e3e",e.placeholder="Please fill in this field";if(2===t)if(""===o)e.style.borderColor="#ff4646",e.style.boxShadow="0px 0px 40px -18px #d53e3e",e.placeholder="Please fill in this field";else{var c=o.split(","),l=[];c.forEach(function(e){l.push(e.trim())});var d=n.props.store,p=d.addTitles,m=d.addDescriptions,f=d.addThumbnailLinks,b=d.addVideoIds,E=d.addVideoPublishDates;l.forEach(function(e){n.props.dispatch({keyword:e,type:"addKeyword"})});var N=y(p,l),T=y(m,l),w=a.e(new Set(N)),k=a.e(new Set(T)),L=a.e(new Set(a.e(w,k))),I=g({source:p,toCompareWith:L}),S=g({source:m,toCompareWith:L}),x=g({source:f,toCompareWith:L}),D=g({source:b,toCompareWith:L}),C=g({source:E,toCompareWith:L});h(n,"add"),v({refToDispatcher:n.props.dispatch,commitName:"Title",arrayToCommit:I}),v({refToDispatcher:n.props.dispatch,commitName:"Description",arrayToCommit:S}),v({refToDispatcher:n.props.dispatch,commitName:"ThumbnailLink",arrayToCommit:x}),n.props.dispatch({type:"addVideoIds",videoIds:D}),n.props.dispatch({type:"addVideoPublishDates",dates:C}),n.props.dispatch({type:"stepInc"})}},n.submitter=n.submitter.bind(n),n.props.dispatch({type:"stepInc"}),n}return a.c(t,e),t.prototype.componentDidMount=function(){var e=document.getElementsByClassName("input-button");document.getElementById("input").addEventListener("keyup",function(t){13===t.keyCode&&(t.preventDefault(),e[0].click())})},t.prototype.componentWillUnmount=function(){3!==this.props.store.stepCounter&&(this.props.dispatch({type:"clearStep"}),this.props.dispatch({type:"hideLoader"}),h(this,"add"))},t.prototype.render=function(){var e;return this.props.store.showLoader&&(e=o.createElement(m,null)),this.props.store.showLoader||(e=o.createElement(p,{refToThis:this,useCase:"link",mainText:"Enter the link :",inputFieldText:"Type or paste your link here"})),2===this.props.store.stepCounter&&(e=o.createElement(p,{refToThis:this,useCase:"keyword",mainText:"Enter key-word :",inputFieldText:"Type your key-word here"})),3===this.props.store.stepCounter&&(e=o.createElement(f.a,{to:"/selector"})),this.props.store.errorToggler&&(e=o.createElement(f.a,{to:"/error"})),e},t}(o.Component),E=Object(i.b)(s)(b),N=(n(45),function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.render=function(){return o.createElement("div",{className:"App"},o.createElement("h1",null,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Necessitatibus tenetur consequuntur voluptatibus ut, quisquam odit porro vel repudiandae vitae ipsum laudantium dolorem impedit, debitis natus maiores quae consectetur totam! Accusantium!"))},t}(o.Component)),T=Object(i.b)(s)(N),w=(n(47),function(e){return o.createElement("h1",null,"fd")}),k=(n(49),n(24)),L=Object(k.a)("TubeDB",1,{upgrade:function(e,t,n,o){console.log(e,t,n,o),e.objectStoreNames.contains("subscription")||e.createObjectStore("subscription",{keyPath:"channelTag"}),e.objectStoreNames.contains("general")||e.createObjectStore("general",{keyPath:"id",autoIncrement:!0}),e.objectStoreNames.contains("last-updated")||e.createObjectStore("last-updated",{keyPath:"channelTag"}),e.objectStoreNames.contains("query")||e.createObjectStore("query",{keyPath:"channelTag"}),e.objectStoreNames.contains("cache-history")||e.createObjectStore("cache-history",{keyPath:"id",autoIncrement:!0}),e.objectStoreNames.contains("cache-keep")||e.createObjectStore("cache-keep",{keyPath:"id",autoIncrement:!0}),e.objectStoreNames.contains("setting")||e.createObjectStore("setting",{keyPath:"id",autoIncrement:!0})}});var I=function(e,t,n){return a.b(this,void 0,void 0,function(){var o,r,i,s;return a.d(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,e];case 1:return o=a.sent(),r=o.transaction(t,"readwrite"),i=void 0,n?[4,r.objectStore(t).get(n)]:[3,3];case 2:return i=a.sent(),[3,5];case 3:return[4,r.objectStore(t).getAll()];case 4:i=a.sent(),a.label=5;case 5:return console.log(i),[2,i];case 6:return s=a.sent(),console.log(s),[3,7];case 7:return[2,null]}})})};var S=function(e,t,n){return a.b(this,void 0,void 0,function(){var o,r;return a.d(this,function(a){switch(a.label){case 0:return[4,e];case 1:return o=a.sent(),(r=o.transaction(t,"readwrite")).objectStore(t).put(n),[4,r.done];case 2:return[2,a.sent()]}})})},x=(n(53),function(e){var t=[];return e.items.forEach(function(n,r){t.push(o.createElement("div",{className:"collapsible-card-items",key:r},o.createElement("div",{className:"item",onClick:function(t){var n;"DIV"===t.target.tagName&&("item"===t.target.parentNode.classList[0]?n=t.target.parentNode.parentNode.childNodes[1]:(console.log(t.target.parentNode.childNodes[1]),n=t.target.parentNode.childNodes[1])),"H3"!==t.target.tagName&&"SPAN"!==t.target.tagName||(console.log(t.target.parentNode.parentNode.parentNode.childNodes[1]),n=t.target.parentNode.parentNode.parentNode.childNodes[1]),"IMG"===t.target.tagName&&(console.log(t.target.parentNode.parentNode.childNodes[1]),n=t.target.parentNode.parentNode.childNodes[1]),console.log(n.parentNode.childNodes[0]),n.parentNode.childNodes[0].style.filter="blur(10.5px)",n.style.display="flex",window.open(e.videoLinks[r],"_blank")}},o.createElement("img",{src:e.videoThumbnailLinks[r]}),o.createElement("div",{className:"collapsible-card-item-info-container"},o.createElement("h3",null,n),o.createElement("span",null,e.videoUploadTimes[r]))),o.createElement("div",{className:"hover-div"},o.createElement("h1",null,"Have you watched the video?"),o.createElement("div",{className:"hover-div-buton-container"},o.createElement("button",{onClick:function(){e.deletor(e.videoLinks[r],e.videoThumbnailLinks[r],e.subscriptionPart)}},o.createElement(l.a,{icon:c.c})),o.createElement("button",{onClick:function(e){"flex"===e.target.parentNode.parentNode.style.display&&(e.target.parentNode.parentNode.style.display="none",e.target.parentNode.parentNode.previousSibling.style.filter="")}},o.createElement(l.a,{icon:c.h}))))))}),o.createElement("div",{className:"collapsible-card"},o.createElement("div",{className:"collapsible-card-title",onClick:e.togglingFunction},o.createElement("img",{src:e.channelLogoLink,className:"unselectable"}),o.createElement("h5",null,e.title),o.createElement(l.a,{className:"drop-icon",icon:c.d})),o.createElement("div",{className:"collapsible-card-item-container"},t))});var D=function(e){var t=a.e(new Set(e)),n={},o=[];return e.forEach(function(e,r){t.forEach(function(t){t===e&&(null===n[e]||void 0===n[e]?n[e]=0:n[e]+=1,n[e]>0&&o.push(r))})}),o};function C(e,t){var n=[];return e.forEach(function(e,o){n.push([]),e.forEach(function(e,r){e&&n[o].push(t[o][r])})}),n}var V=function(e,t){var n=[];return e.forEach(function(e,o){t.includes(o)||n.push(e)}),n},A=function(e){function t(t){var n=e.call(this,t)||this;return n.videoDeleter=n.videoDeleter.bind(n),n.objStoreItemDeletor=n.objStoreItemDeletor,L.then(function(e){I(e,"subscription").then(function(e){if(null===e)throw new Error("Something went wrong while readind IDB!!!");n.props.dispatch({type:"addSubscriptions",subscriptions:e})})}).catch(function(){n.props.dispatch({type:"showError"})}),n}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"eraseSubscriptions"})},t.prototype.dbWriteHelper=function(e,t,n){return a.b(this,void 0,void 0,function(){var o,r,i;return a.d(this,function(a){switch(a.label){case 0:return r=(o=console).log,[4,e];case 1:r.apply(o,[a.sent(),n]),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,e];case 3:return i=a.sent(),[4,S(i,t,n)];case 4:return a.sent(),[3,6];case 5:return a.sent(),this.props.dispatch({type:"showError"}),[3,6];case 6:return[2]}})})},t.prototype.objStoreItemDeletor=function(e,t,n){return a.b(this,void 0,void 0,function(){return a.d(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,e];case 1:return[4,o.sent().transaction(t).store.delete(n)];case 2:return o.sent(),[3,4];case 3:return o.sent(),this.props.dispatch({type:"showError"}),[3,4];case 4:return[2]}})})},t.prototype.videoDeleter=function(e,t,n){var o=this,r=this.props.store.addSubscriptions[n];console.log(this.props.store.addSubscriptions[n].videoLinks);var a=[];r.videoLinks.forEach(function(t,n){a.push([]),t.forEach(function(t){e===t?a[n].push(!1):a[n].push(!0)})}),console.log(a),r.unseenVideoTitles=C(a,r.unseenVideoTitles),r.videoThumbnailLinks=C(a,r.videoThumbnailLinks),r.videoLinks=C(a,r.videoLinks),r.videoUploadTime=C(a,r.videoUploadTime),I(L,"cache-keep",1).then(function(e){if(e){var n=e.data.filter(function(e){return e!==t?(console.log("b1"),!0):(console.log("b2"),!1)});o.dbWriteHelper(L,"cache-keep",{id:1,data:n})}}).catch(function(){o.props.dispatch({type:"showError"})}),console.log(r.videoLinks);var i=!0;r.videoLinks.forEach(function(e){0!==e.length&&(i=!1)}),console.log(i),i?L.then(function(e){var t=e.transaction(["subscription","query"],"readwrite");t.objectStore("subscription").delete(o.props.store.addSubscriptions[n].channelTag),t.done.catch(function(){o.props.dispatch({type:"showError"})})}).catch(function(){o.props.dispatch({type:"showError"})}):this.dbWriteHelper(L,"subscription",r),this.props.store.showLoader,this.props.dispatch({type:"showLoader"}),this.props.dispatch({type:"hideLoader"})},t.prototype.render=function(){var e=this;if(this.props.store.addSubscriptions[0]){var t=this.props.store.addSubscriptions,n=[];return t.forEach(function(t,r){var a=[],i=[],s=[],c=[];t.unseenVideoTitles.forEach(function(e){e.forEach(function(e){a.push(e)})}),t.videoThumbnailLinks.forEach(function(e){e.forEach(function(e){i.push(e)})}),t.videoLinks.forEach(function(e){e.forEach(function(e){s.push(e)})}),t.videoUploadTime.forEach(function(e){e.forEach(function(e){c.push(e)})});var l=D(a);console.log(l);var d=V(a,l),p=V(i,l),u=V(s,l),h=V(c,l);n.push(o.createElement(x,{togglingFunction:function(e){var t=e.target.parentNode.childNodes;2===t.length&&(""===t[0].childNodes[0].style.borderBottomLeftRadius||"20px"===t[0].childNodes[0].style.borderBottomLeftRadius?(t[0].childNodes[2].style.transform="rotate(180deg)",console.log(t[0].childNodes),t[0].childNodes[0].style.borderBottomLeftRadius="0px"):(t[0].childNodes[0].style.borderBottomLeftRadius="20px",t[0].childNodes[2].style.transform="rotate(0deg)")),1===t.length&&(""===(t=e.target.parentNode.parentNode.parentNode.childNodes)[0].childNodes[0].style.borderBottomLeftRadius||"20px"===t[0].childNodes[0].style.borderBottomLeftRadius?(t[0].childNodes[2].style.transform="rotate(180deg)",t[0].childNodes[0].style.borderBottomLeftRadius="0px"):(t[0].childNodes[0].style.borderBottomLeftRadius="20px",t[0].childNodes[2].style.transform="rotate(0deg)")),3===t.length&&(""===(t=e.target.parentNode.parentNode.childNodes)[0].childNodes[0].style.borderBottomLeftRadius||"20px"===t[0].childNodes[0].style.borderBottomLeftRadius?(t[0].childNodes[2].style.transform="rotate(180deg)",t[0].childNodes[0].style.borderBottomLeftRadius="0px"):(t[0].childNodes[0].style.borderBottomLeftRadius="20px",t[0].childNodes[2].style.transform="rotate(0deg)")),t.forEach(function(e){e.classList.forEach(function(t){"collapsible-card-item-container"===t&&("none"===e.style.display||""===e.style.display?(e.style.display="block",e.style.maxHeight=e.scrollHeight+"px"):(e.style.display="none",e.style.maxHeight=null))})})},title:t.channelName,items:d,channelLogoLink:t.channelLogoLink,deletor:e.videoDeleter,videoThumbnailLinks:p,videoLinks:u,videoUploadTimes:h,subscriptionPart:r,key:Math.random()}))}),n}return o.createElement("div",null,"Icons made by"," ",o.createElement("a",{href:"https://www.flaticon.com/authors/pixel-perfect",title:"Pixel perfect"},"Pixel perfect")," ","from"," ",o.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com"))},t}(o.Component),U=Object(i.b)(s)(A),j=(n(55),n(66)),P=function(e){return"/"!==e.location.pathname?o.createElement("div",{className:"navbar"},o.createElement("div",{className:"child-one"},o.createElement(j.a,{to:"/"},o.createElement(l.a,{icon:c.e}))),o.createElement("div",{className:"child-two"},o.createElement("span",null,o.createElement(j.a,{to:"add"},o.createElement(l.a,{icon:c.g}))),o.createElement("span",null,o.createElement(j.a,{to:"delete"},o.createElement(l.a,{icon:c.i}))))):o.createElement("div",{className:"navbar"},o.createElement("span",{className:"center-brand"},o.createElement("h1",null,"TubeNotify")),o.createElement("div",{className:"child-two"},o.createElement("span",null,o.createElement(j.a,{to:"add"},o.createElement(l.a,{icon:c.g}))),o.createElement("span",null,o.createElement(j.a,{to:"delete"},o.createElement(l.a,{icon:c.i})))))},W=(n(57),function(e){return o.createElement("div",{className:"error"},o.createElement("h1",null,"Something went wrong!"),o.createElement("div",{className:"error-body"},o.createElement("h5",null,"Please check your internet connection and try again. If the problem persists, then it's either a YouTube's API server is down or TubeNotify server is down. In that case, the problem will be resolved after a while.")),o.createElement(j.a,{to:"/add"},o.createElement(d,{buttonIcon:c.j,buttonMessage:"Retry"})))}),B=function(e){function t(t){var n=e.call(this,t)||this;return n.props.dispatch({type:"hideError"}),n}return a.c(t,e),t.prototype.render=function(){return o.createElement(W,null)},t}(o.Component),O=Object(i.b)(s)(B),R=(n(59),n(61),function(e){return e.isSelected?o.createElement("div",{className:"info-card",id:e.num.toString(),style:{filter:"blur(4.5px)"}},o.createElement("img",{className:"card-img",src:e.imgLink}),o.createElement("h1",{id:e.num.toString()},e.title)):o.createElement("div",{className:"info-card",id:e.num.toString()},o.createElement("img",{className:"card-img",src:e.imgLink}),o.createElement("h1",{id:e.num.toString()},e.title))});var H=function(e,t){if(e.length!==t.length)return!1;var n=e.sort(),o=t.sort(),r=[];return e.forEach(function(e,t){n[t]===o[t]&&r.push(!0)}),r.length===e.length},q=function(e){function t(t){var n=e.call(this,t)||this;return n.helper=n.helper.bind(n),n.dbWriteHelper=n.dbWriteHelper.bind(n),n.dbReadHelper=n.dbReadHelper.bind(n),n}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"clearStep"}),this.props.dispatch({type:"hideLoader"}),this.props.dispatch({type:"eraseCurrentlySelected"}),h(this,"selector")},t.prototype.helper=function(e){console.log(e.target);var t=Number(e.target.id);"IMG"===e.target.tagName&&(t=Number(e.target.parentNode.id)),"svg"===e.target.tagName&&(t=Number(e.target.parentNode.parentNode.previousSibling.id)),"path"===e.target.tagName&&(t=Number(e.target.parentNode.parentNode.parentNode.previousSibling.id)),"DIV"===e.target.tagName&&isNaN(t)&&(t=Number(e.target.previousSibling.id)),"H1"===e.target.tagName&&""===e.target.id&&(t=Number(e.target.parentNode.previousSibling.id));var n=this.props.store.addTitles.length-t;console.log(n),this.props.dispatch({type:"currentlySelected",number:n})},t.prototype.dbReadHelper=function(e,t,n){return a.b(this,void 0,void 0,function(){var o,r;return a.d(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,e];case 1:return o=a.sent(),[4,o.transaction(t,"readwrite").store.get(n)];case 2:return r=a.sent(),console.log(r),[2,r];case 3:return a.sent(),this.props.dispatch({type:"showError"}),[3,4];case 4:return[2]}})})},t.prototype.dbWriteHelper=function(e,t,n){return a.b(this,void 0,void 0,function(){var o,r,i;return a.d(this,function(a){switch(a.label){case 0:return r=(o=console).log,[4,e];case 1:r.apply(o,[a.sent(),n]),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,e];case 3:return i=a.sent(),[4,S(i,t,n)];case 4:return a.sent(),[3,6];case 5:return a.sent(),this.props.dispatch({type:"showError"}),[3,6];case 6:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props.store,n=t.addTitles,r=t.addThumbnailLinks,i=t.currentlySelected,s=n.length-i-1,p=n.map(function(t,n){return s>n||s===n?o.createElement("div",{key:n,onClick:function(t){e.helper(t)},className:"info-toggler-wrapper"},o.createElement(R,{isSelected:!1,num:n,title:t,imgLink:r[n]})):o.createElement("div",{key:n,onClick:function(t){e.helper(t)},className:"info-toggler-wrapper"},o.createElement(R,{isSelected:!0,num:n,title:t,imgLink:r[n]}),o.createElement("div",{id:"hover-selected",onClick:function(e){}},o.createElement("h1",null,o.createElement(l.a,{icon:c.c}),"Selected")))}),u=o.createElement("div",{className:"selector-container"},o.createElement("h1",{className:"selector-title"},"Select the video you have watched recently :"),p,o.createElement("div",{className:"selector-btn-container"},o.createElement("span",{className:"selector-next-btn",onClick:function(){e.props.dispatch({type:"stepInc"})}},o.createElement(d,{expadedButton:!0,buttonMessage:"Next",buttonIcon:c.b})),o.createElement("span",{className:"selector-load-more-btn",onClick:function(){return a.b(e,void 0,void 0,function(){var e,t,n,o,r,i,s,c,l,d,p,u,h,m,f,b,E,N,T;return a.d(this,function(w){switch(w.label){case 0:e=this.props.store.requestLink.link+"pageToken="+this.props.store.requestLink.nextPageToken,w.label=1;case 1:return w.trys.push([1,4,,5]),[4,fetch(e)];case 2:return[4,w.sent().json()];case 3:return t=w.sent(),console.log(t),n=t.items[t.items.length-1].snippet.resourceId.videoId,o=[],r=[],i=[],s=[],c=[],t.items.forEach(function(e){i.push(e.snippet.title),o.push(e.snippet.description),r.push(e.snippet.thumbnails.medium.url),s.push(e.snippet.resourceId.videoId);var t=e.snippet.publishedAt.substring(0,10);c.push(t)}),l=this.props.store.addKeyword,d=y(i,l),p=y(o,l),u=a.e(new Set(d)),h=a.e(new Set(p)),m=a.e(new Set(a.e(u,h))),f=g({source:i,toCompareWith:m}),b=g({source:o,toCompareWith:m}),E=g({source:r,toCompareWith:m}),N=g({source:s,toCompareWith:m}),T=g({source:c,toCompareWith:m}),this.props.dispatch({type:"eraseCurrentlySelected"}),this.props.dispatch({type:"updateAdditionalInfo",action:{lookedUpToThisVideoTag:n}}),v({refToDispatcher:this.props.dispatch,commitName:"Title",arrayToCommit:f}),v({refToDispatcher:this.props.dispatch,commitName:"Description",arrayToCommit:b}),v({refToDispatcher:this.props.dispatch,commitName:"ThumbnailLink",arrayToCommit:E}),this.props.dispatch({type:"requestLink",link:this.props.store.requestLink.link,nextPageToken:t.nextPageToken}),this.props.dispatch({type:"addVideoIds",videoIds:N}),this.props.dispatch({type:"addVideoPublishDates",dates:T}),[3,5];case 4:return w.sent(),this.props.dispatch({type:"showError"}),[3,5];case 5:return[2]}})})}},o.createElement(d,{expadedButton:!0,buttonMessage:"Load More",buttonIcon:c.a}))));if(4===this.props.store.stepCounter)return this.props.dispatch({type:"stepInc"}),o.createElement(m,null);if(5===this.props.store.stepCounter){var h=[];this.props.store.addVideoIds.slice(-1*this.props.store.currentlySelected).forEach(function(e){var t="https://www.youtube.com/watch?v="+e;h.push(t)});var b=this.dbReadHelper(L,"subscription",this.props.store.addAdditionalInfo.channelTag),E=this.dbReadHelper(L,"query",this.props.store.addAdditionalInfo.channelTag);b.then(function(t){if(t){var n={channelName:e.props.store.addAdditionalInfo.channelName,channelTag:e.props.store.addAdditionalInfo.channelTag,channelLogoLink:e.props.store.addAdditionalInfo.channelLogoLink,unseenVideoTitles:a.e(t.unseenVideoTitles,[e.props.store.addTitles.slice(-1*e.props.store.currentlySelected)]),videoThumbnailLinks:a.e(t.videoThumbnailLinks,[e.props.store.addThumbnailLinks.slice(-1*e.props.store.currentlySelected)]),videoLinks:a.e(t.videoLinks,[h]),videoUploadTime:a.e(t.videoUploadTime,[e.props.store.addVideoPublishDates.slice(-1*e.props.store.currentlySelected)])};e.dbWriteHelper(L,"subscription",n)}else{n={channelName:e.props.store.addAdditionalInfo.channelName,channelTag:e.props.store.addAdditionalInfo.channelTag,channelLogoLink:e.props.store.addAdditionalInfo.channelLogoLink,unseenVideoTitles:[e.props.store.addTitles.slice(-1*e.props.store.currentlySelected)],videoThumbnailLinks:[e.props.store.addThumbnailLinks.slice(-1*e.props.store.currentlySelected)],videoLinks:[h],videoUploadTime:[e.props.store.addVideoPublishDates.slice(-1*e.props.store.currentlySelected)]};e.dbWriteHelper(L,"subscription",n)}}).catch(function(){e.props.dispatch({type:"showError"})}),E.then(function(t){if(t){var n={channelTag:e.props.store.addAdditionalInfo.channelTag,playlistId:e.props.store.addAdditionalInfo.playlistID,details:a.e(t.details,[{lookedUpToThisVideoTag:e.props.store.addAdditionalInfo.lookedUpToThisVideoTag,keyWords:e.props.store.addKeyword}])},o=[];t.details.forEach(function(e){o.push(e.keyWords)});var r=e.props.store.addKeyword;o.forEach(function(t){H(r,t)||e.dbWriteHelper(L,"query",n)}),console.log(o,r)}else{var i={channelTag:e.props.store.addAdditionalInfo.channelTag,playlistId:e.props.store.addAdditionalInfo.playlistID,details:[{lookedUpToThisVideoTag:e.props.store.addAdditionalInfo.lookedUpToThisVideoTag,keyWords:e.props.store.addKeyword}]};e.dbWriteHelper(L,"query",i)}}).catch(function(){e.props.dispatch({type:"showError"})});var N=I(L,"cache-keep",1).then(function(t){console.log(t);var n=[];n=t?a.e(t,[e.props.store.addThumbnailLinks.slice(-1*e.props.store.currentlySelected)]):e.props.store.addThumbnailLinks.slice(-1*e.props.store.currentlySelected),e.dbWriteHelper(L,"cache-keep",{id:1,data:n})}).catch(function(t){console.log(t),e.props.dispatch({type:"showError"})});return console.log(N),o.createElement(f.a,{to:"/final"})}return u},t}(o.Component),K=Object(i.b)(s)(q),M=(n(63),function(e){function t(t){return e.call(this,t)||this}return a.c(t,e),t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"eraseAdditionalInfo"}),this.props.dispatch({type:"eraseKeywords"})},t.prototype.render=function(){if(console.log(this.props),this.props.store.errorToggler)return o.createElement(f.a,{to:"/error"});var e="",t=this.props.store.addKeyword.length,n="keyword";return t>1&&(n="keywords"),this.props.store.addKeyword.forEach(function(n,o){e+=0===o?n:o===t?" and "+n:", "+n}),o.createElement("div",{className:"final-step"},o.createElement("h1",null,"Congratulations!"),o.createElement("div",{className:"success-info"},o.createElement("h4",null,"Your subscription has been set up for the channel"," ",o.createElement("span",null,this.props.store.addAdditionalInfo.channelName)," with the ",n,":"," ",o.createElement("span",null,e),". You'll get notified when"," ",o.createElement("span",null,this.props.store.addAdditionalInfo.channelName)," uploads a video with a title that includes the"," ",n,". You will get all the notifications on this device. If you want to get notifications on other devices besides this device, then go to ",o.createElement("span",null,"Settings")," and copy the ",o.createElement("span",null,"UID"),". Then, open ",o.createElement("span",null,"TubeNotify")," on the other device and navigate to the ",o.createElement("span",null,"Settings")," page and click on"," ",o.createElement("span",null,"Sync Notifications Across Devices"),". Then type code shown on the other device and press the next button. You can connect multiple devices this way to get the same notification across multiple devices. If you want to disable this feature, you can do so from ",o.createElement("span",null,"Settings"),".")),o.createElement("div",{className:"warning-info"},o.createElement("h3",null,o.createElement(l.a,{className:"warning-svg",icon:c.f,color:"#f9a825"}),"Warning",o.createElement(l.a,{className:"warning-svg",icon:c.f,color:"#f9a825"})),o.createElement("div",null,o.createElement("h4",null,o.createElement("em",null,"Please note that: if you deny the notification permission, this app can't send you notifications!")))),o.createElement(j.a,{to:"/"},o.createElement(d,{expadedButton:!0,buttonMessage:"Finish",buttonIcon:c.c})))},t}(o.Component)),_=Object(i.b)(s)(M),Y=n(68),F=n(67),J=n(12),X=function(e,t){if(void 0===e&&(e=[]),"addKeyword"===t.type){var n=a.e(e);return n.push(t.keyword),n}return"eraseKeywords"===t.type?[]:e},z=function(e,t){if(void 0===e&&(e=[]),"addTitles"===t.type){var n=a.e(e);return n.push(t.Title),n}return"eraseTitles"===t.type?[]:e},G=function(e,t){return void 0===e&&(e=!1),"showLoader"===t.type||"hideLoader"!==t.type&&e},Z=function(e,t){return void 0===e&&(e=0),"stepInc"===t.type?e+1:"clearStep"===t.type?0:e},Q=function(e,t){if(void 0===e&&(e=[]),"addDescriptions"===t.type){var n=a.e(e);return n.push(t.Description),n}return"eraseDescriptions"===t.type?[]:e},$=function(e,t){if(void 0===e&&(e=[]),"addThumbnailLinks"===t.type){var n=a.e(e);return n.push(t.ThumbnailLink),n}return"eraseThumbnailLinks"===t.type?[]:e},ee=function(e,t){return void 0===e&&(e=!1),"showError"===t.type||"hideError"!==t.type&&e},te=function(e,t){return void 0===e&&(e=0),"currentlySelected"===t.type?t.number:"eraseCurrentlySelected"===t.type?0:e},ne=function(e,t){return void 0===e&&(e={}),"requestLink"===t.type?{link:t.link,nextPageToken:t.nextPageToken}:"eraseRequestLink"===t.type?{}:e},oe=function(e,t){return void 0===e&&(e={}),"addAdditionalInfo"===t.type?(null==t.channelName&&(t.channelName=e.channelName),null==t.channelLogoLink&&(t.channelLogoLink=e.channelLogoLink),null==t.channelTag&&(t.channelTag=e.channelTag),null==t.playlistID&&(t.playlistID=e.playlistID),null==t.lookedUpToThisVideoTag&&(t.lookedUpToThisVideoTag=e.lookedUpToThisVideoTag),{channelName:t.action.channelName,channelLogoLink:t.action.channelLogoLink,channelTag:t.action.channelTag,playlistID:t.action.playlistID,lookedUpToThisVideoTag:t.action.lookedUpToThisVideoTag}):"updateAdditionalInfo"===t.type?(console.log(e),a.a({},e,{lookedUpToThisVideoTag:t.action.lookedUpToThisVideoTag})):"eraseAdditionalInfo"===t.type?{}:e},re=function(e,t){if(void 0===e&&(e=[]),"addSubscriptions"===t.type){var n=a.e(e);return t.subscriptions.forEach(function(e){n.push(e)}),n}return"eraseSubscriptions"===t.type?[]:e},ae=function(e,t){if(void 0===e&&(e=[]),"addVideoPublishDates"===t.type){var n=a.e(e);return t.dates.forEach(function(e){n.push(e)}),n}return"eraseVideoPublishDates"===t.type?[]:e},ie=function(e,t){if(void 0===e&&(e=[]),"addVideoIds"===t.type){var n=a.e(e);return t.videoIds.forEach(function(e){n.push(e)}),n}return"eraseVideoIds"===t.type?[]:e},se=Object(J.b)({addAdditionalInfo:oe,addDescriptions:Q,addKeyword:X,addSubscriptions:re,addThumbnailLinks:$,addTitles:z,addVideoIds:ie,addVideoPublishDates:ae,currentlySelected:te,errorToggler:ee,requestLink:ne,showLoader:G,stepCounter:Z}),ce=Object(J.c)(se,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),le="BAZTDuUqEH_nPU-HKJlX8rUnriUqtNJ05BvYg4SNM7EVR47cgbDbLfD_nK3bzTDRsKTsD0zvh2KYurPMyqaI-q8",de=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e){navigator.serviceWorker.register(e).then(function(e){var t;e.installing?t=e.installing:e.waiting?t=e.waiting:e.active&&(t=e.active),t&&(console.log("sw current state",t.state),"activated"===t.state&&console.log("sw already activated - Do watever needed here"),t.addEventListener("statechange",function(t){console.log("sw statechange : ",t.target.state),"activated"===t.target.state&&(console.log("Just now activated. now we can subscribe for push notification"),console.log("start"),e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ue(le)}).then(function(e){console.log(e),fetch("api/init",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}})}))})),e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}function ue(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);return console.log("end"),o}r.render(o.createElement(i.a,{store:ce},o.createElement(Y.a,null,o.createElement("div",{className:"main-body"},o.createElement(F.a,{exact:!0,component:P}),o.createElement(F.a,{exact:!0,path:"/",component:U}),o.createElement(F.a,{exact:!0,path:"/add",component:E}),o.createElement(F.a,{exact:!0,path:"/delete",component:m}),o.createElement(F.a,{exact:!0,path:"/settings",component:T}),o.createElement(F.a,{exact:!0,path:"/about",component:w}),o.createElement(F.a,{exact:!0,path:"/error",component:O}),o.createElement(F.a,{exact:!0,path:"/selector",component:K}),o.createElement(F.a,{exact:!0,path:"/final",component:_})))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/custom-service-worker.js";de?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):pe(e)})}}()}},[[25,2,1]]]);
//# sourceMappingURL=main.323cc917.chunk.js.map